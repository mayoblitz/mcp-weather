# Weather MCP Server

このプロジェクトは、Model Context Protocol (MCP) を使用して日本の天気情報を提供するサーバーです。気象庁のAPIを利用して、日本全国の都道府県・市区町村の天気概況や天気予報を取得できます。

## 機能

このサーバーは以下の2つの主要な機能を提供します：

1. **天気概況取得** (`overview-forecast`) - 日本の都道府県・市区町村の天気概況を取得
2. **天気予報取得** (`weekly-forecast`) - 明後日までの詳細天気予報と6日先までの週間天気予報を統合表示

## 前提条件

- Node.js (v14以上)
- npm または yarn

## インストールとビルド

このリポジトリをクローンした後、以下のコマンドを実行してください：

```bash
# 依存パッケージのインストール
npm install

# TypeScriptのビルド
npm run build
```

これにより、`src` ディレクトリのTypeScriptコードがコンパイルされ、`build` ディレクトリに出力されます。

## 実行方法

ビルド後、以下のコマンドでサーバーを起動できます：

```bash
node build/index.js
```

このサーバーは標準入出力（stdio）を使用して通信するため、通常は単体で実行するのではなく、Claude for DesktopなどのMCPクライアントから利用します。

## Claude for Desktopとの統合

Claude for Desktopで使用するには、以下のように設定ファイルを編集してください：

1. Claude for Desktopの設定ファイルを開く：
   - macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
   - Windows: `%APPDATA%\Claude\claude_desktop_config.json`

2. 以下の設定を追加（パスは絶対パスで指定）：

```json
{
  "mcpServers": {
    "weather": {
      "command": "node",
      "args": ["/absolute/path/to/weather/build/index.js"]
    }
  }
}
```

3. Claude for Desktopを再起動
   - Windows環境では、システムトレイ（タスクトレイ）のClaude Desktopアイコンを右クリックして「終了」で終了させ、再度起動してください

## 利用例

サーバーが起動すると、MCPクライアントから以下のような質問ができるようになります：

### 都道府県指定
- 「愛知県の天気概況を教えて」
- 「東京都の天気予報は？」
- 「北海道の週間予報を見せて」

### 市区町村指定
- 「稲沢市の天気予報は？」（愛知県西部の情報のみ表示）
- 「渋谷区の明日の天気は？」
- 「札幌市の週間予報を教えて」

### 同名市区町村の区別
- 「広島県府中市の天気は？」（広島県の府中市を特定）
- 「東京都府中市の予報は？」（東京都の府中市を特定）

## 対応地域

- **都道府県**: 日本全国47都道府県すべて
- **市区町村**: 全国の市区町村（area.jsonに収録されているすべての市区町村）
- **地域フィルタリング**: 市区町村指定時は該当地域のみの詳細情報を表示

## ツール詳細

### `overview-forecast`
- 天気概況、見出し、詳細情報を取得
- 都道府県名または市区町村名で指定可能

### `weekly-forecast`
- **明後日までの詳細予報**：明後日までの詳細天気、風、波の情報、6時間ごとの降水確率、最高・最低気温
- **週間予報（6日先まで）**：天気概要と降水確率、週間気温（最高・最低、信頼度範囲）、平年値情報
- 市区町村指定時は該当地域のみフィルタリング（気温を除く）

## 制限事項

- 日本の天気データは気象庁のAPIを使用しています
- すべてのリクエストにはインターネット接続が必要です
- 市区町村名のみ指定した場合、同名の市区町村では最初に見つかったものが使用されます（都道府県名併用を推奨）

## ライセンス

ISCライセンス
